{% extends "base.html" %}

{% block title %}{{ task.title }} - Task Details{% endblock %}

{% block content %}
<section class="task-detail-section">
    <div class="container">
        <div class="back-link">
            <a href="{{ url_for('index') }}">‚Üê Back to Tasks</a>
        </div>

        <div class="task-detail-grid">
            <div class="task-info">
                <div class="task-header">
                    <h1>{{ task.title }}</h1>
                    <span class="task-status status-{{ task.status }}">{{ task.status.title() }}</span>
                </div>
                
                <div class="task-description">
                    <h3>Task Description</h3>
                    <p>{{ task.description }}</p>
                </div>

                {% if task.reference_image %}
                    <div class="reference-image">
                        <h3>Reference Image</h3>
                        <img src="{{ url_for('static', filename='uploads/tasks/' + task.reference_image) }}" alt="{{ task.title }}">
                    </div>
                {% endif %}

                <div class="task-meta-info">
                    <div class="meta-item">
                        <strong>Task ID:</strong> {{ task.id }}
                    </div>
                    <div class="meta-item">
                        <strong>Created:</strong> {{ task.created_at[:10] if task.created_at else 'Recently' }}
                    </div>
                </div>
            </div>

            <div class="submission-form">
                <div class="form-card">
                    <h3>Submit Your Proof</h3>
                    <p>Upload a screenshot or photo showing you've completed this task</p>

                    <form method="POST" action="{{ url_for('submit_task', task_id=task.id) }}" enctype="multipart/form-data" id="submissionForm">
                        <div class="form-group">
                            <label for="user_name">Your Name</label>
                            <input type="text" id="user_name" name="user_name" required>
                        </div>

                        <div class="form-group">
                            <label for="user_email">Your Email</label>
                            <input type="email" id="user_email" name="user_email" required>
                        </div>

                        <div class="form-group">
                            <label for="proof_image">Proof Image</label>
                            <div class="file-upload-area" id="fileUploadArea">
                                <input type="file" id="proof_image" name="proof_image" accept="image/*" required>
                                <div class="file-upload-text">
                                    <span class="upload-icon">üì∏</span>
                                    <span>Click to upload or drag and drop</span>
                                    <small>PNG, JPG, GIF up to 5MB</small>
                                </div>
                            </div>
                            <div id="filePreview" class="file-preview"></div>
                        </div>

                        <button type="submit" class="btn btn-primary btn-full">Submit Proof</button>
                    </form>
                </div>

                <div class="submission-tips">
                    <h4>üìù Submission Tips</h4>
                    <ul>
                        <li>Ensure your proof clearly shows task completion</li>
                        <li>Use high-quality images for faster approval</li>
                        <li>Include all required elements from the task description</li>
                        <li>Submissions are reviewed within 24-48 hours</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
